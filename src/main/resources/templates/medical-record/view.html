<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Cartella Medica</title>
    <link rel="stylesheet" th:href="@{/css/medicinali.css}" />
</head>
<body>
    <header class="header-main">
        <img src="images/logo-healconnect.png" alt="Logo HealConnect" class="logo" />
        <div class="header-content">
            <h1 class="titolo-home">Cartella Medica del Paziente</h1>
            <nav class="nav">
                <a class="nav-link" th:href="@{/home}">Home</a>
                <a class="nav-link" th:href="@{/profile}">Profilo</a>
                <a class="nav-link" th:href="@{/logout}">Logout</a>
            </nav>
        </div>
    </header>

    <main class="record-container">
        <section class="patient-info">
            <h2>Dati Paziente</h2>
			<ul>
			           <li><strong>Nome:</strong> <span th:text="${patient.user.name}"></span></li>
			           <li><strong>Cognome:</strong> <span th:text="${patient.user.surname}"></span></li>
			           <li><strong>Email:</strong> <span th:text="${patient.user.email}"></span></li>
			           <li><strong>Data di nascita:</strong> <span th:text="${patient.user.birth}"></span></li>
			 </ul>
        </section>

        <section class="prescription-list">
            <h2>Prescrizioni Mediche</h2>

            <div th:if="${#lists.isEmpty(medical-record.prescriptions)}">
                <p>Nessuna prescrizione presente.</p>
            </div>

            <div th:each="prescription : ${medical-record.prescriptions}" class="prescription-card">
                <div class="prescription-header">
                    <h3 class="med-name" th:text="${prescription.medication.name}"></h3>
                    <span class="prescription-date" th:text="${#temporals.format(prescription.date, 'dd/MM/yyyy')}"></span>
                </div>
                <p><strong>Prescritta da:</strong> <span th:text="${prescription.doctor.user.surname}"></span></p>
                <p><strong>Descrizione:</strong> <span th:text="${prescription.description}"></span></p>
                <p><strong>Dettagli Medicinale:</strong> <span th:text="${prescription.medication.description}"></span></p>
                <img th:if="${prescription.medication.imageUrl != null}" 
                     th:src="@{${prescription.medication.imageUrl}}" 
                     alt="Immagine Medicinale" class="med-image" />
            </div>
        </section>
    </main>

    <footer>
        &copy; 2025 HealConnect - Tutti i diritti riservati.
    </footer>
</body>
</html>
